{% extends "wx_base.html" %}

{% block content %}
<div class="span9">
    {% from common.utils.template_util import get_reply_type_name, get_content_display_length %}
		  <div class="row-fluid">
			<div class="page-header">
				<h1>微信回复管理 <small>回复列表</small></h1>
			</div>
			<table class="table table-striped table-bordered table-condensed">
				<thead>
					<tr>
{#						<th>编号</th>#}
						<th>关键字</th>
						<th>回复类型</th>
						<th>回复内容</th>
						<th>操作</th>
					</tr>
				</thead>
				<tbody>
                {% if reply_list %}
                    {% for reply in reply_list %}
                        <tr class="list-users">
{#                            <td>{{ reply.id }}</td>#}
                            <td>{{ reply.key }}</td>
                            <td>{{ get_reply_type_name(reply.reply_type) }}</td>
                            <td>{{ get_content_display_length(reply.content) }}</td>
                            <td>
                                <div class="btn-group">
                                    <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown" href="#">操作列表 <span class="caret"></span></a>
                                    <ul class="dropdown-menu">
                                        <li><a href="/admin/wx/reply/editor?reply_id={{ reply.id }}"><i class="icon-pencil"></i>编辑</a></li>
                                        <li><a href="/admin/wx/reply/delete?reply_id={{ reply.id }}"><i class="icon-trash"></i>删除</a></li>
                                    </ul>
                                </div>
                            </td>

                        </tr>
                    {% end %}
                {% end %}
				</tbody>
			</table>
            <ul id="pagination"></ul>
			<a href="/admin/wx/reply/editor" class="btn btn-success">新建回复规则</a>
		  </div>
        </div>

{% end %}

{% block js %}
<script type="text/javascript" src="{{ static_url('js/jquery.twbsPagination.min.js') }}"></script>
<script type="text/javascript">
    $("#reply").addClass("active").siblings().removeClass("active");
    $("#pagination").twbsPagination({
            totalPages: {{ pages }},
            visiblePages: 5,
            href: '?page=page_no',
            hrefVariable: "page_no",
            first: "首页",
            prev: "上一页",
            next: "下一页",
            last: "尾页"
        });
</script>
{% end %}