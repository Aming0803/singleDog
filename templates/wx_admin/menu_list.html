{% extends "wx_base.html" %}

{% block content %}
<div class="span9">
    {% from common.utils.template_util import get_menu_name_by_category, get_parent_menu_name, get_menu_type_name %}
		  <div class="row-fluid">
			<div class="page-header">
				<h1>微信用户列表 <small>用户管理</small></h1>
			</div>
			<table class="table table-striped table-bordered table-condensed">
				<thead>
					<tr>
						<th>菜单名称</th>
						<th>菜单级别</th>
						<th>父级菜单</th>
						<th>菜单类型</th>
						<th>菜单属性</th>
						<th>操作</th>
					</tr>
				</thead>
				<tbody>
                {% if menu_list %}
                    {% for menu in menu_list %}
                        <tr class="list-users">
                            <td>{{ menu.name }}</td>
                            <td>{{ get_menu_name_by_category(menu.category) }}</td>
                            <td>{{ get_parent_menu_name(menu.parent_id) }}</td>
                            <td>{{ get_menu_type_name(menu.menu_type) }}</td>
                            <td>{{ menu.value }}</td>
                            <td>
                                <div class="btn-group">
                                    <a class="btn btn-mini dropdown-toggle" data-toggle="dropdown" href="#">操作列表 <span class="caret"></span></a>
                                    <ul class="dropdown-menu">
                                        <li><a href="/admin/wx/menu/editor?id={{ menu.id }}"><i class="icon-pencil"></i>编辑</a></li>
                                        <li><a href="/admin/wx/menu/delete?id={{ menu.id }}"><i class="icon-trash"></i>删除</a></li>
                                    </ul>
                                </div>
                            </td>

                        </tr>
                    {% end %}
                {% end %}
				</tbody>
			</table>
            <ul id="pagination"></ul>
			<a href="/admin/wx/menu/editor" class="btn btn-success">新建菜单</a>
            <a href="/app/wx/menu/create" class="btn btn-warning common-fr">生成微信菜单</a>
		  </div>
        </div>

{% end %}

{% block js %}
<script type="text/javascript" src="{{ static_url('js/jquery.twbsPagination.min.js') }}"></script>
<script type="text/javascript">
    $("#menu").addClass("active").siblings().removeClass("active");
    $("#pagination").twbsPagination({
            totalPages: {{ pages }},
            visiblePages: 5,
            href: '?page=page_no',
            hrefVariable: "page_no",
            first: "首页",
            prev: "上一页",
            next: "下一页",
            last: "尾页"
        });
</script>
{% end %}